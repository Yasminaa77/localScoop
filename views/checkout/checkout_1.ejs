<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>shopping cart</title>
<!-- Material.io/ CSS -->
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="../../styles.css">

<style>
    .submitOder {
        display: grid;
        margin: 7%;
    }

    .submitOder input[type='text'],
    select {
        border-radius: 10px;
        height: 40px;
        border: 1px solid rgb(153, 148, 148);
        width: 80%;
    }


    .checkoutIpt {
        display: grid;
        margin: 2%;
    }


    #PostalCode {
        width: 40%;
    }

    #province,
    #city {
        width: 70%;
    }

    .provinceCity {
        display: flex;

    }



    .submitOder input[type='radio'] {
        width: 20px;
        height: 20px;

    }

    #deliveryOption {
        display: flex;
        justify-content: space-around;
        margin: 4%;

    }

    #submitBtn {

        text-align: center;
        justify-content: center;

    }


    .paymentTotal {
        max-width:85% ;
        border-radius: 20px;
        background-color: rgb(255, 239, 214);
        margin-top: 5%;
        padding: 5%;
        text-align: right;
    }
</style>

</head>

<body>
    <header class="fixed_header">

        <div class="nav-wrapper buyer buyer-shop-header">
            <div class="nav-wrapper--left buyer">
                <a onclick="history.back()"><span class="material-icons nav-icon">arrow_back</span></a>
            </div>

            <div class="nav-wrapper--middle buyer">
                Checkout
            </div>

            <div class="nav-wrapper--right buyer">
                <div class="bag">
                    <div class="dot">
                        <%= cartQuantity %>
                    </div>
                    <span class="material-icons nav-icon seller-shop"> shopping_cart </span>
                </div>
            </div>

        </div>
    </header>

    <div class="top_space"></div>

    <form action="/checkout/checkout_confirmation" class="submitOder" method="POST">
        <div class="checkoutIpt">
            <label for="deliveryAddress">Delivery Address:</label>
            <input type="text" name="deliveryAddress" id="deliveryAddress">
        </div>
        <div class="checkoutIpt">
            <label for="postalCode">Postal Code:</label>
            <input type="text" name="postalCode" id="postalCode">
        </div>

        <div class="provinceCity">
            <div class="checkoutIpt">
                <label for="province">Province:</label>
                <input type="text" name="province" id="province">
            </div>
            <div class="checkoutIpt">
                <label for="city">City:</label>
                <input type="text" name="city" id="city">
            </div>
        </div>


        <div class="checkoutIpt">
            <label for="paymentMethod">Payment Method:</label>
            <select name="paymentMethod" id="paymentMethod">
                <option value="visa">Visa Card</option>
                <option value="master">Master Card</option>
                <option value="amx">American Express</option>
            </select>
        </div>

        <div class="checkoutIpt">
            <label for="cartNumber">Card Number:</label>
            <input type="text" name="cartNumber" id="cartNumber">
        </div>

        <h4>Choose a Shipping Method:</h4>
        <div id="deliveryValue">
            <div id="deliveryOption">
                <label for="standardDelivery">Standard Delivery:</label>
                <div>CAD $10.00</div>
                <input type="radio" name="delivery" id="standardDelivery" value="10.00" checked>
            </div>

            <div id="deliveryOption">
                <label for="expressDelivery">Express Delivery: </label>
                <div>CAD $20.00</div>
                <input type="radio" name="delivery" id="expressDelivery" value="20.00">
            </div>
        </div>
        <div class="paymentTotal">
            <p>Subtotal(<%= cartQuantity %> item(s)): $<span id="itemsSubtotal"><%= subtotal %></span></p>
            <p>Shipping: $<span id="shippingFee">10</span></p>
            <p>Tax: $<span id="taxFee"><%= subtotal * 0.12 %></span></p>
            <h4>Order Total: CAD $<span id="orderToal"></span></h4>
        </div>
        <div class="center">
            <button type="submit" class="yellow-bn s-bn"> Submit Order</button>
        </div>
    </form>

    <div class="extraspace2"></div>


    <footer>
        <%- include('../elements/buyer_footer',{page:"product_post"}) -%>
    </footer>
</body>
<!-- <script src="../../help.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>

    let shippingFee = 10
    let expressDelivery = document.getElementById("expressDelivery")
    let standardDelivery = document.getElementById("standardDelivery")

    let itemsSubtotal = `<%= subtotal %>`
    let taxFee = `<%= subtotal * 0.12 %>`
    let orderToal

    expressDelivery.addEventListener("click", () => {
        shippingFee = expressDelivery.value
        document.getElementById('shippingFee').innerHTML = shippingFee;
        orderToal = parseInt(shippingFee) + parseInt(itemsSubtotal) + parseInt(taxFee)
        document.getElementById("orderToal").innerText = orderToal
    })

    standardDelivery.addEventListener("click", () => {
        shippingFee = standardDelivery.value
        document.getElementById('shippingFee').innerHTML = shippingFee;
        orderToal = parseInt(shippingFee) + parseInt(itemsSubtotal) + parseInt(taxFee)
        document.getElementById("orderToal").innerText = orderToal
    })

    orderToal = parseInt(shippingFee) + parseInt(itemsSubtotal) + parseInt(taxFee)
    document.getElementById("orderToal").innerText = orderToal



</script>


</html>